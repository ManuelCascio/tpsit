<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3"
      crossorigin="anonymous"
    />
    <title>Document</title>
    <style>
      body {
        background-color: #002BFF;
      }
      h1 {
        text-align: center;
        text-decoration: underline;
      }
      h3 {
        margin-left: 15px;
      }

      #mainBox {
        width: 450px;
        margin: 2 auto;
        margin-top: 80px;
      }
      .box {
        float: left;
        background-color: #fdf0d5;
        height: 45px;
        width: 45px;
        border: 2px solid black;
      }
      #proemio {
        background-image: linear-gradient(blue, red);
      }
    </style>
  </head>
  <body onload="pagina()">
    <section id="proemio">
      <h1>
        <i><b>ESERCIZIO</b></i>
      </h1>
      <ul>
        <li>
          2 div si muoveranno in modo casuale sulla griglia sottostante.
        </li>
        
      </ul>
      <br />
    </section>

    <div id="mainBox">
      <div name="A" class="box"></div>
      <div name="A" class="box"></div>
      <div name="A" class="box"></div>
      <div name="A" class="box"></div>
      <div name="A" class="box"></div>
      <div name="A" class="box"></div>
      <div name="A" class="box"></div>
      <div name="A" class="box"></div>
      <div name="A" class="box"></div>
      <div name="A" class="box"></div>
      <div name="A" class="box"></div>
      <div name="A" class="box"></div>
      <div name="A" class="box"></div>
      <div name="A" class="box"></div>
      <div name="A" class="box"></div>
      <div name="A" class="box"></div>
      <div name="A" class="box"></div>
      <div name="A" class="box"></div>
      <div name="A" class="box"></div>
      <div name="A" class="box"></div>
      <div name="A" class="box"></div>
      <div name="A" class="box"></div>
      <div name="A" class="box"></div>
      <div name="A" class="box"></div>
      <div name="A" class="box"></div>
      <div name="A" class="box"></div>
      <div name="A" class="box"></div>
      <div name="A" class="box"></div>
      <div name="A" class="box"></div>
      <div name="A" class="box"></div>
      <div name="A" class="box"></div>
      <div name="A" class="box"></div>
      <div name="A" class="box"></div>
      <div name="A" class="box"></div>
      <div name="A" class="box"></div>
      <div name="A" class="box"></div>
      <div name="A" class="box"></div>
      <div name="A" class="box"></div>
      <div name="A" class="box"></div>
      <div name="A" class="box"></div>
      <div name="A" class="box"></div>
      <div name="A" class="box"></div>
      <div name="A" class="box"></div>
      <div name="A" class="box"></div>
      <div name="A" class="box"></div>
      <div name="A" class="box"></div>
      <div name="A" class="box"></div>
      <div name="A" class="box"></div>
      <div name="A" class="box"></div>
      <div name="A" class="box"></div>
      <div name="A" class="box"></div>
      <div name="A" class="box"></div>
      <div name="A" class="box"></div>
      <div name="A" class="box"></div>
      <div name="A" class="box"></div>
      <div name="A" class="box"></div>
      <div name="A" class="box"></div>
      <div name="A" class="box"></div>
      <div name="A" class="box"></div>
      <div name="A" class="box"></div>
      <div name="A" class="box"></div>
      <div name="A" class="box"></div>
      <div name="A" class="box"></div>
      <div name="A" class="box"></div>
      <div name="A" class="box"></div>
      <div name="A" class="box"></div>
      <div name="A" class="box"></div>
      <div name="A" class="box"></div>
      <div name="A" class="box"></div>
      <div name="A" class="box"></div>
      <div name="A" class="box"></div>
      <div name="A" class="box"></div>
      <div name="A" class="box"></div>
      <div name="A" class="box"></div>
      <div name="A" class="box"></div>
      <div name="A" class="box"></div>
      <div name="A" class="box"></div>
      <div name="A" class="box"></div>
      <div name="A" class="box"></div>
      <div name="A" class="box"></div>
      <div name="A" class="box"></div>
      <div name="A" class="box"></div>
      <div name="A" class="box"></div>
      <div name="A" class="box"></div>
      <div name="A" class="box"></div>
      <div name="A" class="box"></div>
      <div name="A" class="box"></div>
      <div name="A" class="box"></div>
      <div name="A" class="box"></div>
      <div name="A" class="box"></div>
      <div name="A" class="box"></div>
      <div name="A" class="box"></div>
      <div name="A" class="box"></div>
      <div name="A" class="box"></div>
      <div name="A" class="box"></div>
      <div name="A" class="box"></div>
      <div name="A" class="box"></div>
      <div name="A" class="box"></div>
      <div name="A" class="box"></div>
      <div name="A" class="box"></div>
    </div>

    <script>
      /*
      let bassoDestra = 11;
      let destra = 1;
      let altoDestra = -9;
      let alto = -10;
      let basso = 10;
      let sinistra = -1;
      let bassoSinistra = 9;
      let altoSinistra = -11;
      let arrayDeiMovimenti = [-11, -10, -9, 0, -1, 1, 9, 10, 11];
      */

      function calcoloMovimento(indice) {
        let arrayDelMomento = [-11, -10, -9, -1, 0, 1, 9, 10, 11];
        let spostamento = 0;

        if (indice % 10 == 0) {
          // escludi le posizioni che vanno fuori dalla prima colonna
          arrayDelMomento[0] = 0;
          arrayDelMomento[3] = 0;
          arrayDelMomento[6] = 0;
        }
        if (indice <= 9) {
          // escludi le posizioni che vanno fuori dalla prima riga
          arrayDelMomento[0] = 0;
          arrayDelMomento[1] = 0;
          arrayDelMomento[2] = 0;
        }
        if (
          indice == 9 ||
          indice == 19 ||
          indice == 29 ||
          indice == 39 ||
          indice == 49 ||
          indice == 59 ||
          indice == 69 ||
          indice == 79 ||
          indice == 89 ||
          indice == 99
        ) {
          // escludi le posizioni che vanno fuori dall ultima colonna
          arrayDelMomento[2] = 0;
          arrayDelMomento[5] = 0;
          arrayDelMomento[8] = 0;
        }
        if (indice >= 90) {
          // escludi le posizioni che vanno fuori dall ultima riga
          arrayDelMomento[6] = 0;
          arrayDelMomento[7] = 0;
          arrayDelMomento[8] = 0;
        }
        do {
          spostamento =
            arrayDelMomento[Math.floor(Math.random() * arrayDelMomento.length)];
        } while (spostamento == 0);

        return spostamento;
      }
      function pagina() {
        var divs = document.getElementsByName("A");

        let indiceDivRosso = 0;
        let indiceDivBlu = 99;

        divs[indiceDivRosso].style.backgroundColor = "#FF0000";
        divs[indiceDivBlu].style.backgroundColor = "#0070FF";

        setInterval(function () {
          //sposta div rosso
          let movimento = calcoloMovimento(indiceDivRosso);
          //alert(movimento);
          divs[indiceDivRosso].style.backgroundColor = "#fdf0d5";
          indiceDivRosso += movimento;
          divs[indiceDivRosso].style.backgroundColor = "#FF0000";
        }, 500);

        setInterval(function () {
          //sposta div blu
          let movimento = calcoloMovimento(indiceDivBlu);
          divs[indiceDivBlu].style.backgroundColor = "#fdf0d5";
          //alert(movimento);
          indiceDivBlu += movimento;
          divs[indiceDivBlu].style.backgroundColor = "#0070FF";
        }, 250);
      }
    </script>
  </body>
</html>
